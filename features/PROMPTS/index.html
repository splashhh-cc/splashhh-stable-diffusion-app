
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="mauwii">
      
      
        <link rel="canonical" href="https://invoke-ai.github.io/InvokeAI/features/PROMPTS/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>Prompting-Features - InvokeAI Stable Diffusion Toolkit Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#prompting-features" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="InvokeAI Stable Diffusion Toolkit Docs" class="md-header__button md-logo" aria-label="InvokeAI Stable Diffusion Toolkit Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            InvokeAI Stable Diffusion Toolkit Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Prompting-Features
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9v1Z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/invoke-ai/InvokeAI" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    invoke-ai/InvokeAI
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  <li class="md-tabs__item">
    <a href="../../CHANGELOG/" class="md-tabs__link">
      Changelog
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Features
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../help/SAMPLER_CONVERGENCE/" class="md-tabs__link">
        Help
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../installation/" class="md-tabs__link">
        Installation
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../other/CONTRIBUTORS/" class="md-tabs__link">
        Other
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="InvokeAI Stable Diffusion Toolkit Docs" class="md-nav__button md-logo" aria-label="InvokeAI Stable Diffusion Toolkit Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    InvokeAI Stable Diffusion Toolkit Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/invoke-ai/InvokeAI" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    invoke-ai/InvokeAI
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../CHANGELOG/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Features" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CLI/" class="md-nav__link">
        Command-Line Interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../CONCEPTS/" class="md-nav__link">
        Concepts Library
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../EMBIGGEN/" class="md-nav__link">
        Embiggen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../IMG2IMG/" class="md-nav__link">
        Image-to-Image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../INPAINTING/" class="md-nav__link">
        Inpainting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../MODEL_MERGING/" class="md-nav__link">
        Model Merging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../NSFW/" class="md-nav__link">
        The NSFW Checker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../OTHER/" class="md-nav__link">
        Others
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../OUTPAINTING/" class="md-nav__link">
        Outpainting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../POSTPROCESS/" class="md-nav__link">
        Postprocessing
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Prompting-Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Prompting-Features
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#reading-prompts-from-a-file" class="md-nav__link">
    Reading Prompts from a File
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#negative-and-unconditioned-prompts" class="md-nav__link">
    Negative and Unconditioned Prompts
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prompt-syntax-features" class="md-nav__link">
    Prompt Syntax Features
  </a>
  
    <nav class="md-nav" aria-label="Prompt Syntax Features">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#attention-weighting" class="md-nav__link">
    Attention weighting
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blending-between-prompts" class="md-nav__link">
    Blending between prompts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cross-attention-control-prompt2prompt" class="md-nav__link">
    Cross-Attention Control ('prompt2prompt')
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#escaping-parantheses-and-speech-marks" class="md-nav__link">
    Escaping parantheses () and speech marks ""
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prompt-blending" class="md-nav__link">
    Prompt Blending
  </a>
  
    <nav class="md-nav" aria-label="Prompt Blending">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blue-sphere-red-cube-hybrid" class="md-nav__link">
    "blue sphere, red cube, hybrid"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blue-sphere025-red-cube075-hybrid" class="md-nav__link">
    "blue sphere:0.25 red cube:0.75 hybrid"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blue-sphere075-red-cube025-hybrid" class="md-nav__link">
    "blue sphere:0.75 red cube:0.25 hybrid"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blue-sphere05-red-cube05-hybrid" class="md-nav__link">
    "blue sphere:0.5 red cube:0.5 hybrid"
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blue-sphere05-red-cube05" class="md-nav__link">
    "blue sphere:0.5 red cube:0.5"
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../TEXTUAL_INVERSION/" class="md-nav__link">
        Textual-Inversion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../UNIFIED_CANVAS/" class="md-nav__link">
        Unified Canvas
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../VARIATIONS/" class="md-nav__link">
        Variations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../WEB/" class="md-nav__link">
        InvokeAI Web Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../WEBUIHOTKEYS/" class="md-nav__link">
        WebUI Hotkey List
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Help
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Help" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Help
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../help/SAMPLER_CONVERGENCE/" class="md-nav__link">
        Sampler Convergence
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Deprecated
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deprecated" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Deprecated
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../help/deprecated/TROUBLESHOOT/" class="md-nav__link">
        F.A.Q.
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/010_INSTALL_AUTOMATED/" class="md-nav__link">
        Installing with the Automated Installer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/020_INSTALL_MANUAL/" class="md-nav__link">
        Installing Manually
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/030_INSTALL_CUDA_AND_ROCM/" class="md-nav__link">
        NVIDIA Cuda / AMD ROCm
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/040_INSTALL_DOCKER/" class="md-nav__link">
        Installing with Docker
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/050_INSTALLING_MODELS/" class="md-nav__link">
        Installing Models
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/060_INSTALL_PATCHMATCH/" class="md-nav__link">
        Installing PyPatchMatch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/070_INSTALL_XFORMERS/" class="md-nav__link">
        Installing xFormers
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_9" type="checkbox" id="__nav_5_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_9">
          Developers documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Developers documentation" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_9">
          <span class="md-nav__icon md-icon"></span>
          Developers documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/Developers_documentation/BUILDING_BINARY_INSTALLERS/" class="md-nav__link">
        build binary installers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_10" type="checkbox" id="__nav_5_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_10">
          Deprecated documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Deprecated documentation" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_10">
          <span class="md-nav__icon md-icon"></span>
          Deprecated documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/deprecated_documentation/INSTALL_BINARY/" class="md-nav__link">
        InvokeAI Binary Installer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/deprecated_documentation/INSTALL_JUPYTER/" class="md-nav__link">
        Running InvokeAI on Google Colab using a Jupyter Notebook
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/deprecated_documentation/INSTALL_LINUX/" class="md-nav__link">
        Manual Installation, Linux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/deprecated_documentation/INSTALL_MAC/" class="md-nav__link">
        Manual Installation, macOS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/deprecated_documentation/INSTALL_PCP/" class="md-nav__link">
        Installing InvokeAI with the Pre-Compiled PIP Installer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/deprecated_documentation/INSTALL_SOURCE/" class="md-nav__link">
        Source Installer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/deprecated_documentation/INSTALL_WINDOWS/" class="md-nav__link">
        Manual Installation, Windows
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Other
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Other" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Other
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/CONTRIBUTORS/" class="md-nav__link">
        Contributors
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../other/README-CompViz/" class="md-nav__link">
        CompViz-Readme
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/invoke-ai/InvokeAI/edit/main/docs/features/PROMPTS.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 12h8v2H8v-2m2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4v-2m-2-2h4.1l.9-.9V16H8v2m12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
  </a>


<h1 id="prompting-features"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3.045 18.894 9.94 12 3.045 5.106a.75.75 0 0 1 1.06-1.061l7.425 7.425a.75.75 0 0 1 0 1.06l-7.424 7.425a.75.75 0 0 1-1.061-1.06zm8.205.606a.75.75 0 0 0 0 1.5h9.5a.75.75 0 0 0 0-1.5h-9.5z"/></svg></span> Prompting-Features<a class="headerlink" href="#prompting-features" title="Permanent link">#</a></h1>
<h2 id="reading-prompts-from-a-file"><strong>Reading Prompts from a File</strong><a class="headerlink" href="#reading-prompts-from-a-file" title="Permanent link">#</a></h2>
<p>You can automate <code>invoke.py</code> by providing a text file with the prompts you want
to run, one line per prompt. The text file must be composed with a text editor
(e.g. Notepad) and not a word processor. Each line should look like what you
would type at the invoke&gt; prompt:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="s2">&quot;a beautiful sunny day in the park, children playing&quot;</span><span class="w"> </span>-n4<span class="w"> </span>-C10
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="s2">&quot;stormy weather on a mountain top, goats grazing&quot;</span><span class="w"> </span>-s100
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="s2">&quot;innovative packaging for a squid&#39;s dinner&quot;</span><span class="w"> </span>-S137038382
</code></pre></div>
<p>Then pass this file's name to <code>invoke.py</code> when you invoke it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>python<span class="w"> </span>scripts/invoke.py<span class="w"> </span>--from_file<span class="w"> </span><span class="s2">&quot;/path/to/prompts.txt&quot;</span>
</code></pre></div>
<p>You may also read a series of prompts from standard input by providing
a filename of <code>-</code>. For example, here is a python script that creates a
matrix of prompts, each one varying slightly:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="ch">#!/usr/bin/env python</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nv">adjectives</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;sunny&#39;</span>,<span class="s1">&#39;rainy&#39;</span>,<span class="s1">&#39;overcast&#39;</span><span class="o">]</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nv">samplers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;k_lms&#39;</span>,<span class="s1">&#39;k_euler_a&#39;</span>,<span class="s1">&#39;k_heun&#39;</span><span class="o">]</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nv">cfg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="m">7</span>.5,<span class="w"> </span><span class="m">9</span>,<span class="w"> </span><span class="m">11</span><span class="o">]</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="k">for</span><span class="w"> </span>adj<span class="w"> </span><span class="k">in</span><span class="w"> </span>adjectives:
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span>samp<span class="w"> </span><span class="k">in</span><span class="w"> </span>samplers:
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">        </span><span class="k">for</span><span class="w"> </span>cg<span class="w"> </span><span class="k">in</span><span class="w"> </span>cfg:
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">            </span>print<span class="o">(</span>f<span class="s1">&#39;a {adj} day -A{samp} -C{cg}&#39;</span><span class="o">)</span>
</code></pre></div>
<p>It's output looks like this (abbreviated):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>a<span class="w"> </span>sunny<span class="w"> </span>day<span class="w"> </span>-Aklms<span class="w"> </span>-C7.5
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>a<span class="w"> </span>sunny<span class="w"> </span>day<span class="w"> </span>-Aklms<span class="w"> </span>-C9
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>a<span class="w"> </span>sunny<span class="w"> </span>day<span class="w"> </span>-Aklms<span class="w"> </span>-C11
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>a<span class="w"> </span>sunny<span class="w"> </span>day<span class="w"> </span>-Ak_euler_a<span class="w"> </span>-C7.5
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>a<span class="w"> </span>sunny<span class="w"> </span>day<span class="w"> </span>-Ak_euler_a<span class="w"> </span>-C9
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>...
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>a<span class="w"> </span>overcast<span class="w"> </span>day<span class="w"> </span>-Ak_heun<span class="w"> </span>-C9
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>a<span class="w"> </span>overcast<span class="w"> </span>day<span class="w"> </span>-Ak_heun<span class="w"> </span>-C11
</code></pre></div>
<p>To feed it to invoke.py, pass the filename of "-"</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>python<span class="w"> </span>matrix.py<span class="w"> </span><span class="p">|</span><span class="w"> </span>python<span class="w"> </span>scripts/invoke.py<span class="w"> </span>--from_file<span class="w"> </span>-
</code></pre></div>
<p>When the script is finished, each of the 27 combinations
of adjective, sampler and CFG will be executed.</p>
<p>The command-line interface provides <code>!fetch</code> and <code>!replay</code> commands
which allow you to read the prompts from a single previously-generated
image or a whole directory of them, write the prompts to a file, and
then replay them. Or you can create your own file of prompts and feed
them to the command-line client from within an interactive session.
See <a href="../CLI/">Command-Line Interface</a> for details.</p>
<hr />
<h2 id="negative-and-unconditioned-prompts"><strong>Negative and Unconditioned Prompts</strong><a class="headerlink" href="#negative-and-unconditioned-prompts" title="Permanent link">#</a></h2>
<p>Any words between a pair of square brackets will instruct Stable Diffusion to
attempt to ban the concept from the generated image.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>this is a test prompt [not really] to make you understand [cool] how this works.
</code></pre></div>
<p>In the above statement, the words 'not really cool` will be ignored by Stable
Diffusion.</p>
<p>Here's a prompt that depicts what it does.</p>
<p>original prompt:</p>
<p><code class="highlight"><span class="s2">&quot;A fantastical translucent pony made of water and foam, ethereal, radiant, hyperalism, scottish folklore, digital painting, artstation, concept art, smooth, 8 k frostbite 3 engine, ultra detailed, art by artgerm and greg rutkowski and magali villeneuve&quot;</span><span class="w"> </span>-s<span class="w"> </span><span class="m">20</span><span class="w"> </span>-W<span class="w"> </span><span class="m">512</span><span class="w"> </span>-H<span class="w"> </span><span class="m">768</span><span class="w"> </span>-C<span class="w"> </span><span class="m">7</span>.5<span class="w"> </span>-A<span class="w"> </span>k_euler_a<span class="w"> </span>-S<span class="w"> </span><span class="m">1654590180</span></code></p>
<figure>
<p><img alt="step1" src="../../assets/negative_prompt_walkthru/step1.png" /></p>
</figure>
<p>That image has a woman, so if we want the horse without a rider, we can
influence the image not to have a woman by putting [woman] in the prompt, like
this:</p>
<p><code class="highlight"><span class="s2">&quot;A fantastical translucent poney made of water and foam, ethereal, radiant, hyperalism, scottish folklore, digital painting, artstation, concept art, smooth, 8 k frostbite 3 engine, ultra detailed, art by artgerm and greg rutkowski and magali villeneuve [woman]&quot;</span><span class="w"> </span>-s<span class="w"> </span><span class="m">20</span><span class="w"> </span>-W<span class="w"> </span><span class="m">512</span><span class="w"> </span>-H<span class="w"> </span><span class="m">768</span><span class="w"> </span>-C<span class="w"> </span><span class="m">7</span>.5<span class="w"> </span>-A<span class="w"> </span>k_euler_a<span class="w"> </span>-S<span class="w"> </span><span class="m">1654590180</span></code></p>
<figure>
<p><img alt="step2" src="../../assets/negative_prompt_walkthru/step2.png" /></p>
</figure>
<p>That's nice - but say we also don't want the image to be quite so blue. We can
add "blue" to the list of negative prompts, so it's now [woman blue]:</p>
<p><code class="highlight"><span class="s2">&quot;A fantastical translucent poney made of water and foam, ethereal, radiant, hyperalism, scottish folklore, digital painting, artstation, concept art, smooth, 8 k frostbite 3 engine, ultra detailed, art by artgerm and greg rutkowski and magali villeneuve [woman blue]&quot;</span><span class="w"> </span>-s<span class="w"> </span><span class="m">20</span><span class="w"> </span>-W<span class="w"> </span><span class="m">512</span><span class="w"> </span>-H<span class="w"> </span><span class="m">768</span><span class="w"> </span>-C<span class="w"> </span><span class="m">7</span>.5<span class="w"> </span>-A<span class="w"> </span>k_euler_a<span class="w"> </span>-S<span class="w"> </span><span class="m">1654590180</span></code></p>
<figure>
<p><img alt="step3" src="../../assets/negative_prompt_walkthru/step3.png" /></p>
</figure>
<p>Getting close - but there's no sense in having a saddle when our horse doesn't
have a rider, so we'll add one more negative prompt: [woman blue saddle].</p>
<p><code class="highlight"><span class="s2">&quot;A fantastical translucent poney made of water and foam, ethereal, radiant, hyperalism, scottish folklore, digital painting, artstation, concept art, smooth, 8 k frostbite 3 engine, ultra detailed, art by artgerm and greg rutkowski and magali villeneuve [woman blue saddle]&quot;</span><span class="w"> </span>-s<span class="w"> </span><span class="m">20</span><span class="w"> </span>-W<span class="w"> </span><span class="m">512</span><span class="w"> </span>-H<span class="w"> </span><span class="m">768</span><span class="w"> </span>-C<span class="w"> </span><span class="m">7</span>.5<span class="w"> </span>-A<span class="w"> </span>k_euler_a<span class="w"> </span>-S<span class="w"> </span><span class="m">1654590180</span></code></p>
<figure>
<p><img alt="step4" src="../../assets/negative_prompt_walkthru/step4.png" /></p>
</figure>
<div class="admonition notes">
<p class="admonition-title">Notes about this feature:</p>
<ul>
<li>The only requirement for words to be ignored is that they are in between a pair of square brackets.</li>
<li>You can provide multiple words within the same bracket.</li>
<li>You can provide multiple brackets with multiple words in different places of your prompt. That works just fine.</li>
<li>To improve typical anatomy problems, you can add negative prompts like <code>[bad anatomy, extra legs, extra arms, extra fingers, poorly drawn hands, poorly drawn feet, disfigured, out of frame, tiling, bad art, deformed, mutated]</code>.</li>
</ul>
</div>
<hr />
<h2 id="prompt-syntax-features"><strong>Prompt Syntax Features</strong><a class="headerlink" href="#prompt-syntax-features" title="Permanent link">#</a></h2>
<p>The InvokeAI prompting language has the following features:</p>
<h3 id="attention-weighting">Attention weighting<a class="headerlink" href="#attention-weighting" title="Permanent link">#</a></h3>
<p>Append a word or phrase with <code>-</code> or <code>+</code>, or a weight between <code>0</code> and <code>2</code>
(<code>1</code>=default), to decrease or increase "attention" (= a mix of per-token CFG
weighting multiplier and, for <code>-</code>, a weighted blend with the prompt without the
term).</p>
<p>The following syntax is recognised:</p>
<ul>
<li>single words without parentheses: <code>a tall thin man picking apricots+</code></li>
<li>single or multiple words with parentheses:
  <code>a tall thin man picking (apricots)+</code> <code>a tall thin man picking (apricots)-</code>
  <code>a tall thin man (picking apricots)+</code> <code>a tall thin man (picking apricots)-</code></li>
<li>more effect with more symbols <code>a tall thin man (picking apricots)++</code></li>
<li>nesting <code>a tall thin man (picking apricots+)++</code> (<code>apricots</code> effectively gets
  <code>+++</code>)</li>
<li>all of the above with explicit numbers <code>a tall thin man picking (apricots)1.1</code>
  <code>a tall thin man (picking (apricots)1.3)1.1</code>. (<code>+</code> is equivalent to 1.1, <code>++</code>
  is pow(1.1,2), <code>+++</code> is pow(1.1,3), etc; <code>-</code> means 0.9, <code>--</code> means pow(0.9,2),
  etc.)</li>
<li>attention also applies to <code>[unconditioning]</code> so
  <code>a tall thin man picking apricots [(ladder)0.01]</code> will <em>very gently</em> nudge SD
  away from trying to draw the man on a ladder</li>
</ul>
<p>You can use this to increase or decrease the amount of something. Starting from
this prompt of <code>a man picking apricots from a tree</code>, let's see what happens if
we increase and decrease how much attention we want Stable Diffusion to pay to
the word <code>apricots</code>:</p>
<figure>
<p><img alt="an AI generated image of a man picking apricots from a tree" src="../../assets/prompt_syntax/apricots-0.png" /></p>
</figure>
<p>Using <code>-</code> to reduce apricot-ness:</p>
<table>
<thead>
<tr>
<th><code>a man picking apricots- from a tree</code></th>
<th><code>a man picking apricots-- from a tree</code></th>
<th><code>a man picking apricots--- from a tree</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="an AI generated image of a man picking apricots from a tree, with smaller apricots" src="../../assets/prompt_syntax/apricots--1.png" /></td>
<td><img alt="an AI generated image of a man picking apricots from a tree, with even smaller and fewer apricots" src="../../assets/prompt_syntax/apricots--2.png" /></td>
<td><img alt="an AI generated image of a man picking apricots from a tree, with very few very small apricots" src="../../assets/prompt_syntax/apricots--3.png" /></td>
</tr>
</tbody>
</table>
<p>Using <code>+</code> to increase apricot-ness:</p>
<table>
<thead>
<tr>
<th><code>a man picking apricots+ from a tree</code></th>
<th><code>a man picking apricots++ from a tree</code></th>
<th><code>a man picking apricots+++ from a tree</code></th>
<th><code>a man picking apricots++++ from a tree</code></th>
<th><code>a man picking apricots+++++ from a tree</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="an AI generated image of a man picking apricots from a tree, with larger, more vibrant apricots" src="../../assets/prompt_syntax/apricots-1.png" /></td>
<td><img alt="an AI generated image of a man picking apricots from a tree with even larger, even more vibrant apricots" src="../../assets/prompt_syntax/apricots-2.png" /></td>
<td><img alt="an AI generated image of a man picking apricots from a tree, but the man has been replaced by a pile of apricots" src="../../assets/prompt_syntax/apricots-3.png" /></td>
<td><img alt="an AI generated image of a man picking apricots from a tree, but the man has been replaced by a mound of giant melting-looking apricots" src="../../assets/prompt_syntax/apricots-4.png" /></td>
<td><img alt="an AI generated image of a man picking apricots from a tree, but the man and the leaves and parts of the ground have all been replaced by giant melting-looking apricots" src="../../assets/prompt_syntax/apricots-5.png" /></td>
</tr>
</tbody>
</table>
<p>You can also change the balance between different parts of a prompt. For
example, below is a <code>mountain man</code>:</p>
<figure>
<p><img alt="an AI generated image of a mountain man" src="../../assets/prompt_syntax/mountain-man.png" /></p>
</figure>
<p>And here he is with more mountain:</p>
<table>
<thead>
<tr>
<th><code>mountain+ man</code></th>
<th><code>mountain++ man</code></th>
<th><code>mountain+++ man</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="../../assets/prompt_syntax/mountain1-man.png" /></td>
<td><img alt="" src="../../assets/prompt_syntax/mountain2-man.png" /></td>
<td><img alt="" src="../../assets/prompt_syntax/mountain3-man.png" /></td>
</tr>
</tbody>
</table>
<p>Or, alternatively, with more man:</p>
<table>
<thead>
<tr>
<th><code>mountain man+</code></th>
<th><code>mountain man++</code></th>
<th><code>mountain man+++</code></th>
<th><code>mountain man++++</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><img alt="" src="../../assets/prompt_syntax/mountain-man1.png" /></td>
<td><img alt="" src="../../assets/prompt_syntax/mountain-man2.png" /></td>
<td><img alt="" src="../../assets/prompt_syntax/mountain-man3.png" /></td>
<td><img alt="" src="../../assets/prompt_syntax/mountain-man4.png" /></td>
</tr>
</tbody>
</table>
<h3 id="blending-between-prompts">Blending between prompts<a class="headerlink" href="#blending-between-prompts" title="Permanent link">#</a></h3>
<ul>
<li><code>("a tall thin man picking apricots", "a tall thin man picking pears").blend(1,1)</code></li>
<li>The existing prompt blending using <code>:&lt;weight&gt;</code> will continue to be supported -
  <code>("a tall thin man picking apricots", "a tall thin man picking pears").blend(1,1)</code>
  is equivalent to
  <code>a tall thin man picking apricots:1 a tall thin man picking pears:1</code> in the
  old syntax.</li>
<li>Attention weights can be nested inside blends.</li>
<li>Non-normalized blends are supported by passing <code>no_normalize</code> as an additional
  argument to the blend weights, eg
  <code>("a tall thin man picking apricots", "a tall thin man picking pears").blend(1,-1,no_normalize)</code>.
  very fun to explore local maxima in the feature space, but also easy to
  produce garbage output.</li>
</ul>
<p>See the section below on "Prompt Blending" for more information about how this
works.</p>
<h3 id="cross-attention-control-prompt2prompt">Cross-Attention Control ('prompt2prompt')<a class="headerlink" href="#cross-attention-control-prompt2prompt" title="Permanent link">#</a></h3>
<p>Sometimes an image you generate is almost right, and you just want to change one
detail without affecting the rest. You could use a photo editor and inpainting
to overpaint the area, but that's a pain. Here's where <code>prompt2prompt</code> comes in
handy.</p>
<p>Generate an image with a given prompt, record the seed of the image, and then
use the <code>prompt2prompt</code> syntax to substitute words in the original prompt for
words in a new prompt. This works for <code>img2img</code> as well.</p>
<p>For example, consider the prompt <code>a cat.swap(dog) playing with a ball in the forest</code>. Normally, because of the word words interact with each other when doing a stable diffusion image generation, these two prompts would generate different compositions:
  - <code>a cat playing with a ball in the forest</code>
  - <code>a dog playing with a ball in the forest</code></p>
<table>
<thead>
<tr>
<th><code>a cat playing with a ball in the forest</code></th>
<th><code>a dog playing with a ball in the forest</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>img</td>
<td>img</td>
</tr>
</tbody>
</table>
<div class="highlight"><pre><span></span><code>  - For multiple word swaps, use parentheses: `a (fluffy cat).swap(barking dog) playing with a ball in the forest`.
  - To swap a comma, use quotes: `a (&quot;fluffy, grey cat&quot;).swap(&quot;big, barking dog&quot;) playing with a ball in the forest`.
</code></pre></div>
<ul>
<li>Supports options <code>t_start</code> and <code>t_end</code> (each 0-1) loosely corresponding to bloc97's <code>prompt_edit_tokens_start/_end</code> but with the math swapped to make it easier to
  intuitively understand. <code>t_start</code> and <code>t_end</code> are used to control on which steps cross-attention control should run. With the default values <code>t_start=0</code> and <code>t_end=1</code>, cross-attention control is active on every step of image generation. Other values can be used to turn cross-attention control off for part of the image generation process.<ul>
<li>For example, if doing a diffusion with 10 steps for the prompt is <code>a cat.swap(dog, t_start=0.3, t_end=1.0) playing with a ball in the forest</code>, the first 3 steps will be run as <code>a cat playing with a ball in the forest</code>, while the last 7 steps will run as <code>a dog playing with a ball in the forest</code>, but the pixels that represent <code>dog</code> will be locked to the pixels that would have represented <code>cat</code> if the <code>cat</code> prompt had been used instead.</li>
<li>Conversely, for <code>a cat.swap(dog, t_start=0, t_end=0.7) playing with a ball in the forest</code>, the first 7 steps will run as <code>a dog playing with a ball in the forest</code> with the pixels that represent <code>dog</code> locked to the same pixels that would have represented <code>cat</code> if the <code>cat</code> prompt was being used instead. The final 3 steps will just run <code>a cat playing with a ball in the forest</code>.<blockquote>
<p>For img2img, the step sequence does not start at 0 but instead at <code>(1.0-strength)</code> - so if the img2img <code>strength</code> is <code>0.7</code>, <code>t_start</code> and <code>t_end</code> must both be greater than <code>0.3</code> (<code>1.0-0.7</code>) to have any effect.</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p>Prompt2prompt <code>.swap()</code> is not compatible with xformers, which will be temporarily disabled when doing a <code>.swap()</code> - so you should expect to use more VRAM and run slower that with xformers enabled.</p>
<p>The <code>prompt2prompt</code> code is based off
<a href="https://github.com/bloc97/CrossAttentionControl">bloc97's colab</a>.</p>
<p>Note that <code>prompt2prompt</code> is not currently working with the runwayML inpainting
model, and may never work due to the way this model is set up. If you attempt to
use <code>prompt2prompt</code> you will get the original image back. However, since this
model is so good at inpainting, a good substitute is to use the <code>clipseg</code> text
masking option:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>invoke&gt;<span class="w"> </span>a<span class="w"> </span>fluffy<span class="w"> </span>cat<span class="w"> </span>eating<span class="w"> </span>a<span class="w"> </span>hotdot
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>Outputs:
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="o">[</span><span class="m">1010</span><span class="o">]</span><span class="w"> </span>outputs/000025.2182095108.png:<span class="w"> </span>a<span class="w"> </span>fluffy<span class="w"> </span>cat<span class="w"> </span>eating<span class="w"> </span>a<span class="w"> </span>hotdog
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>invoke&gt;<span class="w"> </span>a<span class="w"> </span>smiling<span class="w"> </span>dog<span class="w"> </span>eating<span class="w"> </span>a<span class="w"> </span>hotdog<span class="w"> </span>-I<span class="w"> </span><span class="m">000025</span>.2182095108.png<span class="w"> </span>-tm<span class="w"> </span>cat
</code></pre></div>
<h3 id="escaping-parantheses-and-speech-marks">Escaping parantheses () and speech marks ""<a class="headerlink" href="#escaping-parantheses-and-speech-marks" title="Permanent link">#</a></h3>
<p>If the model you are using has parentheses () or speech marks "" as part of its
syntax, you will need to "escape" these using a backslash, so that<code>(my_keyword)</code>
becomes <code>\(my_keyword\)</code>. Otherwise, the prompt parser will attempt to interpret
the parentheses as part of the prompt syntax and it will get confused.</p>
<hr />
<h2 id="prompt-blending"><strong>Prompt Blending</strong><a class="headerlink" href="#prompt-blending" title="Permanent link">#</a></h2>
<p>You may blend together different sections of the prompt to explore the AI's
latent semantic space and generate interesting (and often surprising!)
variations. The syntax is:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>blue<span class="w"> </span>sphere:0.25<span class="w"> </span>red<span class="w"> </span>cube:0.75<span class="w"> </span>hybrid
</code></pre></div>
<p>This will tell the sampler to blend 25% of the concept of a blue sphere with 75%
of the concept of a red cube. The blend weights can use any combination of
integers and floating point numbers, and they do not need to add up to 1.
Everything to the left of the <code>:XX</code> up to the previous <code>:XX</code> is used for
merging, so the overall effect is:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="m">0</span>.25<span class="w"> </span>*<span class="w"> </span><span class="s2">&quot;blue sphere&quot;</span><span class="w"> </span>+<span class="w"> </span><span class="m">0</span>.75<span class="w"> </span>*<span class="w"> </span><span class="s2">&quot;white duck&quot;</span><span class="w"> </span>+<span class="w"> </span>hybrid
</code></pre></div>
<p>Because you are exploring the "mind" of the AI, the AI's way of mixing two
concepts may not match yours, leading to surprising effects. To illustrate, here
are three images generated using various combinations of blend weights. As
usual, unless you fix the seed, the prompts will give you different results each
time you run them.</p>
<figure>
<h3 id="blue-sphere-red-cube-hybrid">"blue sphere, red cube, hybrid"<a class="headerlink" href="#blue-sphere-red-cube-hybrid" title="Permanent link">#</a></h3>
</figure>
<p>This example doesn't use melding at all and represents the default way of mixing
concepts.</p>
<figure>
<p><img alt="blue-sphere-red-cube-hyprid" src="../../assets/prompt-blending/blue-sphere-red-cube-hybrid.png" /></p>
</figure>
<p>It's interesting to see how the AI expressed the concept of "cube" as the four
quadrants of the enclosing frame. If you look closely, there is depth there, so
the enclosing frame is actually a cube.</p>
<figure>
<h3 id="blue-sphere025-red-cube075-hybrid">"blue sphere:0.25 red cube:0.75 hybrid"<a class="headerlink" href="#blue-sphere025-red-cube075-hybrid" title="Permanent link">#</a></h3>
<p><img alt="blue-sphere-25-red-cube-75" src="../../assets/prompt-blending/blue-sphere-0.25-red-cube-0.75-hybrid.png" /></p>
</figure>
<p>Now that's interesting. We get neither a blue sphere nor a red cube, but a red
sphere embedded in a brick wall, which represents a melding of concepts within
the AI's "latent space" of semantic representations. Where is Ludwig
Wittgenstein when you need him?</p>
<figure>
<h3 id="blue-sphere075-red-cube025-hybrid">"blue sphere:0.75 red cube:0.25 hybrid"<a class="headerlink" href="#blue-sphere075-red-cube025-hybrid" title="Permanent link">#</a></h3>
<p><img alt="blue-sphere-75-red-cube-25" src="../../assets/prompt-blending/blue-sphere-0.75-red-cube-0.25-hybrid.png" /></p>
</figure>
<p>Definitely more blue-spherey. The cube is gone entirely, but it's really cool
abstract art.</p>
<figure>
<h3 id="blue-sphere05-red-cube05-hybrid">"blue sphere:0.5 red cube:0.5 hybrid"<a class="headerlink" href="#blue-sphere05-red-cube05-hybrid" title="Permanent link">#</a></h3>
<p><img alt="blue-sphere-5-red-cube-5-hybrid" src="../../assets/prompt-blending/blue-sphere-0.5-red-cube-0.5-hybrid.png" /></p>
</figure>
<p>Whoa...! I see blue and red, but no spheres or cubes. Is the word "hybrid"
summoning up the concept of some sort of scifi creature? Let's find out.</p>
<figure>
<h3 id="blue-sphere05-red-cube05">"blue sphere:0.5 red cube:0.5"<a class="headerlink" href="#blue-sphere05-red-cube05" title="Permanent link">#</a></h3>
<p><img alt="blue-sphere-5-red-cube-5" src="../../assets/prompt-blending/blue-sphere-0.5-red-cube-0.5.png" /></p>
</figure>
<p>Indeed, removing the word "hybrid" produces an image that is more like what we'd
expect.</p>
<p>In conclusion, prompt blending is great for exploring creative space, but can be
difficult to direct. A forthcoming release of InvokeAI will feature more
deterministic prompt weighting.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 25, 2023</span>
      
        <br>
        Created:
        <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">September 18, 2022</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../POSTPROCESS/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Postprocessing" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Postprocessing
            </div>
          </div>
        </a>
      
      
        
        <a href="../TEXTUAL_INVERSION/" class="md-footer__link md-footer__link--next" aria-label="Next: Textual-Inversion" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Textual-Inversion
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 InvokeAI Team
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.suggest", "toc.integrate"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>